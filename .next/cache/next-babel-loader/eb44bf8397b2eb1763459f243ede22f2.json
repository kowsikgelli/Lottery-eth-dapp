{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/cryptokowsik/Desktop/Lottery-Dapp/pages/index.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Layout from '../components/Layout';\nimport web3 from '../web3.js';\nimport Lottery from '../ethereum/build/contracts/Lottery.json';\nimport Error from './_error.js';\nimport LotteryInstance from '../instance.js';\nimport { Form, Message, Button } from 'semantic-ui-react';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      errorMessage: '',\n      enteredAmount: '',\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var accounts;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.setState({\n                  loading: true\n                });\n\n                _context.prev = 1;\n                _context.next = 4;\n                return web3.eth.getAccounts();\n\n              case 4:\n                accounts = _context.sent;\n                _context.next = 7;\n                return LotteryInstance.methods.enter().send({\n                  from: accounts[0],\n                  value: web3.utils.toWei(event.target.value, 'ether')\n                });\n\n              case 7:\n                console.log(\"success\");\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.setState({\n                  errorMessage: _context.t0.message\n                });\n\n              case 13:\n                _this.setState({\n                  loading: false\n                });\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    });\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          accounts = _this$props.accounts,\n          manager = _this$props.manager,\n          errorOccured = _this$props.errorOccured;\n\n      if (errorOccured) {\n        return __jsx(Error, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 20\n          }\n        });\n      }\n\n      console.log(accounts);\n      return __jsx(Layout, {\n        accounts: accounts,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }\n      }, __jsx(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 17\n        }\n      }, \"Manager : \", manager), __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }\n      }, \"Contract address : \", LotteryInstance.options.address), __jsx(Form, {\n        error: !!this.state.errorMessage,\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 17\n        }\n      }, __jsx(Form.Field, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }\n      }, __jsx(Form.Input, {\n        label: \"Enter Amount in wei\",\n        placeholder: \"Enter Ammount\",\n        value: this.state.enteredAmount,\n        name: \"enteredAmount\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 25\n        }\n      })), __jsx(Message, {\n        error: true,\n        header: \"Oops!\",\n        content: this.state.errorMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }\n      }), __jsx(Button, {\n        loading: this.state.loading,\n        color: \"green\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }\n      }, \"Enter\")));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var errorOccured, accounts, manager;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                errorOccured = false;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return web3.eth.getAccounts();\n\n              case 4:\n                accounts = _context2.sent;\n                _context2.next = 7;\n                return LotteryInstance.methods.manager().call();\n\n              case 7:\n                manager = _context2.sent;\n                _context2.next = 14;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n                errorOccured = true;\n\n              case 14:\n                return _context2.abrupt(\"return\", {\n                  accounts: accounts,\n                  manager: manager,\n                  errorOccured: errorOccured\n                });\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 10]]);\n      }));\n\n      function getInitialProps() {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/cryptokowsik/Desktop/Lottery-Dapp/pages/index.js"],"names":["React","Component","Layout","web3","Lottery","Error","LotteryInstance","Form","Message","Button","App","errorMessage","enteredAmount","loading","event","setState","eth","getAccounts","accounts","methods","enter","send","from","value","utils","toWei","target","console","log","message","name","props","manager","errorOccured","options","address","state","onSubmit","handleChange","call"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,OAAP,MAAoB,0CAApB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,eAAP,MAA4B,gBAA5B;AACA,SAAQC,IAAR,EAAaC,OAAb,EAAqBC,MAArB,QAAkC,mBAAlC;;IACMC,G;;;;;;;;;;;;;;;;4DACI;AACFC,MAAAA,YAAY,EAAG,EADb;AAEFC,MAAAA,aAAa,EAAC,EAFZ;AAGFC,MAAAA,OAAO,EAAC;AAHN,K;;;0EAiBK,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACP,sBAAKC,QAAL,CAAc;AAACF,kBAAAA,OAAO,EAAC;AAAT,iBAAd;;AADO;AAAA;AAAA,uBAGkBV,IAAI,CAACa,GAAL,CAASC,WAAT,EAHlB;;AAAA;AAGCC,gBAAAA,QAHD;AAAA;AAAA,uBAIGZ,eAAe,CAACa,OAAhB,CAAwBC,KAAxB,GACLC,IADK,CACA;AAACC,kBAAAA,IAAI,EAACJ,QAAQ,CAAC,CAAD,CAAd;AAAmBK,kBAAAA,KAAK,EAACpB,IAAI,CAACqB,KAAL,CAAWC,KAAX,CAAiBX,KAAK,CAACY,MAAN,CAAaH,KAA9B,EAAoC,OAApC;AAAzB,iBADA,CAJH;;AAAA;AAMHI,gBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AANG;AAAA;;AAAA;AAAA;AAAA;;AAQH,sBAAKb,QAAL,CAAc;AAACJ,kBAAAA,YAAY,EAAC,YAAIkB;AAAlB,iBAAd;;AARG;AAUP,sBAAKd,QAAL,CAAc;AAACF,kBAAAA,OAAO,EAAC;AAAT,iBAAd;;AAVO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;mEAYE,UAACC,KAAD,EAAS;AAClB,YAAKC,QAAL,qBAAgBD,KAAK,CAACY,MAAN,CAAaI,IAA7B,EAAmChB,KAAK,CAACY,MAAN,CAAaH,KAAhD;AACH,K;;;;;;;6BACO;AAAA,wBACoC,KAAKQ,KADzC;AAAA,UACGb,QADH,eACGA,QADH;AAAA,UACYc,OADZ,eACYA,OADZ;AAAA,UACoBC,YADpB,eACoBA,YADpB;;AAEJ,UAAGA,YAAH,EAAgB;AACZ,eAAO,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACH;;AACDN,MAAAA,OAAO,CAACC,GAAR,CAAYV,QAAZ;AACA,aACI,MAAC,MAAD;AAAQ,QAAA,QAAQ,EAAEA,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAec,OAAf,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAwB1B,eAAe,CAAC4B,OAAhB,CAAwBC,OAAhD,CAFJ,EAGI,MAAC,IAAD;AAAM,QAAA,KAAK,EAAE,CAAC,CAAC,KAAKC,KAAL,CAAWzB,YAA1B;AAAwC,QAAA,QAAQ,EAAE,KAAK0B,QAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,IAAD,CAAM,KAAN;AACA,QAAA,KAAK,EAAC,qBADN;AAEA,QAAA,WAAW,EAAC,eAFZ;AAGA,QAAA,KAAK,EAAE,KAAKD,KAAL,CAAWxB,aAHlB;AAIA,QAAA,IAAI,EAAC,eAJL;AAKA,QAAA,QAAQ,EAAE,KAAK0B,YALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAUI,MAAC,OAAD;AAAS,QAAA,KAAK,MAAd;AAAe,QAAA,MAAM,EAAC,OAAtB;AAA8B,QAAA,OAAO,EAAE,KAAKF,KAAL,CAAWzB,YAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVJ,EAWI,MAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKyB,KAAL,CAAWvB,OAA5B;AAAqC,QAAA,KAAK,EAAC,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAXJ,CAHJ,CADJ;AAoBH;;;;;;;;;;AApDOoB,gBAAAA,Y,GAAe,K;;;uBAGE9B,IAAI,CAACa,GAAL,CAASC,WAAT,E;;;AAAjBC,gBAAAA,Q;;uBACgBZ,eAAe,CAACa,OAAhB,CAAwBa,OAAxB,GAAkCO,IAAlC,E;;;AAAhBP,gBAAAA,O;;;;;;;AAEEL,gBAAAA,OAAO,CAACC,GAAR;AACAK,gBAAAA,YAAY,GAAC,IAAb;;;kDAEC;AAACf,kBAAAA,QAAQ,EAARA,QAAD;AAAUc,kBAAAA,OAAO,EAAPA,OAAV;AAAkBC,kBAAAA,YAAY,EAAZA;AAAlB,iB;;;;;;;;;;;;;;;;;;;EAhBGhC,S;;AA8DlB,eAAeS,GAAf","sourcesContent":["import React,{Component} from 'react';\nimport Layout from '../components/Layout';\nimport web3 from '../web3.js';\nimport Lottery from '../ethereum/build/contracts/Lottery.json';\nimport Error from './_error.js'\nimport LotteryInstance from '../instance.js';\nimport {Form,Message,Button} from 'semantic-ui-react';\nclass App extends Component{\n    state={\n        errorMessage : '',\n        enteredAmount:'',\n        loading:false\n    }\n    static async getInitialProps(){\n        let errorOccured = false;\n        let accounts,manager\n        try{\n            accounts = await web3.eth.getAccounts();\n            manager = await LotteryInstance.methods.manager().call();\n        }catch(err){\n              console.log(err);\n              errorOccured=true;\n        }\n        return {accounts,manager,errorOccured};\n    }\n    onSubmit = async (event) =>{\n        this.setState({loading:true})\n        try{\n            let accounts = await web3.eth.getAccounts();\n            await LotteryInstance.methods.enter()\n            .send({from:accounts[0], value:web3.utils.toWei(event.target.value,'ether')})\n            console.log(\"success\")\n        }catch(err){\n            this.setState({errorMessage:err.message});\n        }\n        this.setState({loading:false})\n    }\n    handleChange=(event)=>{\n        this.setState({[event.target.name]:event.target.value});\n    }\n    render(){\n        const {accounts,manager,errorOccured} = this.props;\n        if(errorOccured){\n            return <Error />\n        }\n        console.log(accounts)\n        return(\n            <Layout accounts={accounts}>\n                <h2>Manager : {manager}</h2>\n                <h3>Contract address : {LotteryInstance.options.address}</h3>\n                <Form error={!!this.state.errorMessage} onSubmit={this.onSubmit}>\n                    <Form.Field>\n                        <Form.Input \n                        label='Enter Amount in wei'\n                        placeholder='Enter Ammount' \n                        value={this.state.enteredAmount}\n                        name=\"enteredAmount\"\n                        onChange={this.handleChange}\n                        />\n                    </Form.Field>\n                    <Message error header=\"Oops!\" content={this.state.errorMessage} />\n                    <Button loading={this.state.loading} color=\"green\">Enter</Button>\n                </Form>\n            </Layout>\n                \n        )\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}